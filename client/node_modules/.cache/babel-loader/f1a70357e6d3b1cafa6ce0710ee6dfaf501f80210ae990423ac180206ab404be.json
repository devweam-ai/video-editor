{"ast":null,"code":"var _jsxFileName = \"/Users/kshitijvarma/Desktop/runway video apI/client/src/components/AIVideoStudio.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useVideo } from '../context/VideoContext';\nimport { Search, Play, Clock, Sparkles, Send, Paperclip, ChevronDown, Star, Heart, X, Video, MessageSquare, Plus, Loader2, CheckCircle, AlertCircle } from 'lucide-react';\nimport VideoPlayer from './VideoPlayer';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AIVideoStudio = () => {\n  _s();\n  const {\n    videos,\n    generateVideo,\n    loading,\n    fetchVideos,\n    updateVideo\n  } = useVideo();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [prompt, setPrompt] = useState('');\n  const [selectedModel, setSelectedModel] = useState('Runway Gen-4 Turbo');\n  const [showLovableBanner, setShowLovableBanner] = useState(true);\n  const [selectedVideo, setSelectedVideo] = useState(null);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    fetchVideos();\n  }, []);\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatMessages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // Function to detect if the prompt is asking to enhance/modify an existing video\n  const isEnhancementPrompt = prompt => {\n    const enhancementKeywords = ['enhance', 'improve', 'modify', 'change', 'add', 'remove', 'make it', 'make the', 'update', 'edit', 'adjust', 'fix', 'better', 'more', 'less', 'brighter', 'darker', 'faster', 'slower', 'longer', 'shorter'];\n    const lowerPrompt = prompt.toLowerCase();\n    return enhancementKeywords.some(keyword => lowerPrompt.includes(keyword));\n  };\n\n  // Function to get the most recent video from chat messages\n  const getLatestVideoFromChat = () => {\n    // Look for the most recent video in chat messages\n    for (let i = chatMessages.length - 1; i >= 0; i--) {\n      const message = chatMessages[i];\n      if (message.videoUrl && message.videoId) {\n        return {\n          videoId: message.videoId,\n          videoUrl: message.videoUrl,\n          prompt: message.originalPrompt || 'previous video'\n        };\n      }\n    }\n    return null;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!prompt.trim() || loading) return;\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: prompt,\n      timestamp: new Date()\n    };\n    setChatMessages(prev => [...prev, userMessage]);\n    const currentPrompt = prompt;\n    setPrompt('');\n    setIsGenerating(true);\n    try {\n      // Check if this is an enhancement prompt and if we have a video to enhance\n      const isEnhancement = isEnhancementPrompt(currentPrompt);\n      const latestVideo = getLatestVideoFromChat();\n      let result;\n      let aiMessage;\n      if (isEnhancement && latestVideo) {\n        // This is an enhancement request for an existing video\n        console.log('Enhancement detected, enhancing video:', latestVideo.videoId);\n        result = await generateVideo(`${currentPrompt} based on this video: ${latestVideo.prompt}`, 5, '16:9', selectedModel);\n        aiMessage = {\n          id: Date.now() + 1,\n          type: 'ai',\n          content: 'I\\'m enhancing your video...',\n          timestamp: new Date(),\n          videoId: result.videoId,\n          status: 'generating',\n          isEnhancement: true,\n          originalPrompt: currentPrompt\n        };\n      } else {\n        // This is a new video generation request\n        result = await generateVideo(currentPrompt, 5, '16:9', selectedModel);\n        aiMessage = {\n          id: Date.now() + 1,\n          type: 'ai',\n          content: 'I\\'m generating your video...',\n          timestamp: new Date(),\n          videoId: result.videoId,\n          status: 'generating',\n          originalPrompt: currentPrompt\n        };\n      }\n      setChatMessages(prev => [...prev, aiMessage]);\n\n      // Start polling for video completion\n      pollVideoStatus(result.videoId);\n    } catch (error) {\n      console.error('Error generating video:', error);\n      toast.error('Failed to generate video');\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: 'Sorry, I couldn\\'t generate your video. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      setChatMessages(prev => [...prev, errorMessage]);\n      setIsGenerating(false);\n    }\n  };\n  const pollVideoStatus = async videoId => {\n    const maxAttempts = 60; // 5 minutes max\n    let attempts = 0;\n    const poll = async () => {\n      try {\n        const response = await fetch(`/api/videos/${videoId}/status`);\n        const data = await response.json();\n        if (data.status === 'completed' && data.videoUrl) {\n          // Update the AI message with the completed video\n          setChatMessages(prev => prev.map(msg => msg.videoId === videoId ? {\n            ...msg,\n            content: 'Here\\'s your generated video!',\n            videoUrl: data.videoUrl,\n            status: 'completed'\n          } : msg));\n          setIsGenerating(false);\n          toast.success('Video generated successfully!');\n          return;\n        } else if (data.status === 'failed') {\n          setChatMessages(prev => prev.map(msg => msg.videoId === videoId ? {\n            ...msg,\n            content: 'Sorry, video generation failed. Please try again.',\n            status: 'failed',\n            isError: true\n          } : msg));\n          setIsGenerating(false);\n          toast.error('Video generation failed');\n          return;\n        }\n        attempts++;\n        if (attempts < maxAttempts) {\n          setTimeout(poll, 5000); // Poll every 5 seconds\n        } else {\n          setChatMessages(prev => prev.map(msg => msg.videoId === videoId ? {\n            ...msg,\n            content: 'Video generation is taking longer than expected. Please check back later.',\n            status: 'timeout'\n          } : msg));\n          setIsGenerating(false);\n        }\n      } catch (error) {\n        console.error('Error polling video status:', error);\n        setIsGenerating(false);\n      }\n    };\n    poll();\n  };\n  const handleVideoClick = video => {\n    setSelectedVideo(video);\n\n    // Create chat context for this video\n    const initialMessages = [{\n      id: 1,\n      type: 'ai',\n      content: `Here's your video: \"${video.title || 'Untitled Video'}\". You can ask me to enhance it, modify it, or create variations. What would you like to do?`,\n      timestamp: new Date(),\n      videoUrl: video.videoUrl,\n      videoId: video.videoId\n    }];\n    setChatMessages(initialMessages);\n  };\n  const handleEnhanceVideo = async enhancementPrompt => {\n    if (!selectedVideo || !enhancementPrompt.trim()) return;\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: enhancementPrompt,\n      timestamp: new Date()\n    };\n    setChatMessages(prev => [...prev, userMessage]);\n    setIsGenerating(true);\n    try {\n      // For now, we'll create a new video with the enhancement prompt\n      // In a real implementation, you might want to use video-to-video generation\n      const result = await generateVideo(`${enhancementPrompt} based on this video: ${selectedVideo.prompt || 'previous video'}`, 5, '16:9', selectedModel);\n      const aiMessage = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: 'I\\'m enhancing your video...',\n        timestamp: new Date(),\n        videoId: result.videoId,\n        status: 'generating'\n      };\n      setChatMessages(prev => [...prev, aiMessage]);\n      pollVideoStatus(result.videoId);\n    } catch (error) {\n      console.error('Error enhancing video:', error);\n      toast.error('Failed to enhance video');\n      setIsGenerating(false);\n    }\n  };\n  const startNewChat = () => {\n    setSelectedVideo(null);\n    setChatMessages([{\n      id: 1,\n      type: 'ai',\n      content: 'Welcome to AI Video Studio! I can help you create amazing videos. Just describe what you want to see and I\\'ll generate it for you. You can also edit and enhance your videos with simple prompts.',\n      timestamp: new Date()\n    }]);\n  };\n  const filteredVideos = videos.filter(video => video.title && video.title.toLowerCase().includes(searchTerm.toLowerCase()) || video.prompt && video.prompt.toLowerCase().includes(searchTerm.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen bg-gradient-to-br from-purple-50/20 via-white to-white flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(motion.header, {\n      initial: {\n        opacity: 0,\n        y: -20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      className: \"bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-4 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(Star, {\n            className: \"h-6 w-6 text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold text-gray-900\",\n          children: \"AI Video Studio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Model:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedModel,\n              onChange: e => setSelectedModel(e.target.value),\n              className: \"appearance-none bg-white border border-gray-200 rounded-lg px-3 py-1.5 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Runway Gen-4 Turbo\",\n                children: \"Runway Gen-4 Turbo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Runway Gen-3\",\n                children: \"Runway Gen-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Veo3\",\n                children: \"Veo3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n              className: \"absolute right-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400 pointer-events-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2 text-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm\",\n            children: \"Next-gen AI video creation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Sparkles, {\n            className: \"h-4 w-4 text-primary-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          x: -20\n        },\n        animate: {\n          opacity: 1,\n          x: 0\n        },\n        transition: {\n          duration: 0.5\n        },\n        className: \"w-80 bg-white/60 backdrop-blur-sm border-r border-gray-200 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-b border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold text-gray-900\",\n              children: \"Video Library\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: startNewChat,\n              className: \"p-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors\",\n              title: \"Start New Chat\",\n              children: /*#__PURE__*/_jsxDEV(Plus, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search videos...\",\n              value: searchTerm,\n              onChange: e => setSearchTerm(e.target.value),\n              className: \"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-4 space-y-3\",\n          children: filteredVideos.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-gray-500 py-8\",\n            children: [/*#__PURE__*/_jsxDEV(Video, {\n              className: \"h-12 w-12 mx-auto mb-3 text-gray-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No videos found\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this) : filteredVideos.map(video => /*#__PURE__*/_jsxDEV(motion.div, {\n            whileHover: {\n              scale: 1.02\n            },\n            whileTap: {\n              scale: 0.98\n            },\n            onClick: () => handleVideoClick(video),\n            className: `p-3 rounded-lg border cursor-pointer transition-all ${(selectedVideo === null || selectedVideo === void 0 ? void 0 : selectedVideo.videoId) === video.videoId ? 'bg-primary-50 border-primary-200 shadow-sm' : 'bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-8 bg-gray-100 rounded flex items-center justify-center flex-shrink-0\",\n                children: video.status === 'completed' ? /*#__PURE__*/_jsxDEV(Play, {\n                  className: \"h-4 w-4 text-gray-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 25\n                }, this) : video.status === 'generating' ? /*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"h-4 w-4 text-primary-500 animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(AlertCircle, {\n                  className: \"h-4 w-4 text-red-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-sm font-medium text-gray-900 truncate\",\n                  children: video.title || 'Untitled Video'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-500 mt-1 line-clamp-2\",\n                  children: video.prompt || 'No prompt available'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2 mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-400\",\n                    children: video.createdAt ? new Date(video.createdAt).toLocaleDateString() : 'Unknown date'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 25\n                  }, this), video.duration && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-400 flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(Clock, {\n                      className: \"h-3 w-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 29\n                    }, this), video.duration, \"s\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 393,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this)\n          }, video.videoId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-6 space-y-4\",\n          children: [chatMessages.map(message => /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              opacity: 0,\n              y: 20\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            className: `flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `max-w-2xl ${message.type === 'user' ? 'order-2' : 'order-1'}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex items-start space-x-3 ${message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${message.type === 'user' ? 'bg-primary-500' : 'bg-gradient-to-br from-primary-500 to-primary-600'}`,\n                  children: message.type === 'user' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white text-sm font-medium\",\n                    children: \"U\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(Star, {\n                    className: \"h-4 w-4 text-white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `rounded-2xl px-4 py-3 ${message.type === 'user' ? 'bg-primary-500 text-white' : message.isError ? 'bg-red-50 text-red-800 border border-red-200' : 'bg-white border border-gray-200 shadow-sm'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: message.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 23\n                  }, this), message.videoUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3\",\n                    children: /*#__PURE__*/_jsxDEV(VideoPlayer, {\n                      videoUrl: message.videoUrl\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 446,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 445,\n                    columnNumber: 25\n                  }, this), message.status === 'generating' && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 flex items-center space-x-2 text-primary-600\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"h-4 w-4 animate-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 453,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: \"Generating video...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 454,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `text-xs mt-2 ${message.type === 'user' ? 'text-primary-100' : 'text-gray-400'}`,\n                    children: message.timestamp.toLocaleTimeString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this)\n          }, message.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          transition: {\n            duration: 0.6,\n            delay: 0.5\n          },\n          className: \"p-6 border-t border-gray-200 bg-white/80 backdrop-blur-sm\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-2xl p-4 shadow-lg border border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: selectedVideo ? \"Enhance this video...\" : \"Describe the video you want to create...\",\n                  value: prompt,\n                  onChange: e => setPrompt(e.target.value),\n                  onKeyPress: e => e.key === 'Enter' && handleSubmit(e),\n                  className: \"w-full px-4 py-3 pr-20 bg-secondary-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm\",\n                  disabled: isGenerating\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"p-1.5 text-gray-400 hover:text-gray-600 transition-colors\",\n                    children: /*#__PURE__*/_jsxDEV(Paperclip, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 496,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 495,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSubmit,\n                    disabled: isGenerating || !prompt.trim(),\n                    className: \"p-1.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n                    children: isGenerating ? /*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"h-4 w-4 animate-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 504,\n                      columnNumber: 25\n                    }, this) : /*#__PURE__*/_jsxDEV(Send, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 506,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 498,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n};\n_s(AIVideoStudio, \"3HeQOF0XThvOY9/2V3PuOCiNknU=\", false, function () {\n  return [useVideo];\n});\n_c = AIVideoStudio;\nexport default AIVideoStudio;\nvar _c;\n$RefreshReg$(_c, \"AIVideoStudio\");","map":{"version":3,"names":["React","useState","useEffect","useRef","motion","AnimatePresence","useVideo","Search","Play","Clock","Sparkles","Send","Paperclip","ChevronDown","Star","Heart","X","Video","MessageSquare","Plus","Loader2","CheckCircle","AlertCircle","VideoPlayer","toast","jsxDEV","_jsxDEV","AIVideoStudio","_s","videos","generateVideo","loading","fetchVideos","updateVideo","searchTerm","setSearchTerm","prompt","setPrompt","selectedModel","setSelectedModel","showLovableBanner","setShowLovableBanner","selectedVideo","setSelectedVideo","chatMessages","setChatMessages","isGenerating","setIsGenerating","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","isEnhancementPrompt","enhancementKeywords","lowerPrompt","toLowerCase","some","keyword","includes","getLatestVideoFromChat","i","length","message","videoUrl","videoId","originalPrompt","handleSubmit","e","preventDefault","trim","userMessage","id","Date","now","type","content","timestamp","prev","currentPrompt","isEnhancement","latestVideo","result","aiMessage","console","log","status","pollVideoStatus","error","errorMessage","isError","maxAttempts","attempts","poll","response","fetch","data","json","map","msg","success","setTimeout","handleVideoClick","video","initialMessages","title","handleEnhanceVideo","enhancementPrompt","startNewChat","filteredVideos","filter","className","children","header","initial","opacity","y","animate","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","div","x","transition","duration","onClick","placeholder","whileHover","scale","whileTap","createdAt","toLocaleDateString","toLocaleTimeString","ref","delay","onKeyPress","key","disabled","_c","$RefreshReg$"],"sources":["/Users/kshitijvarma/Desktop/runway video apI/client/src/components/AIVideoStudio.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useVideo } from '../context/VideoContext';\nimport { \n  Search, \n  Play, \n  Clock, \n  Sparkles,\n  Send,\n  Paperclip,\n  ChevronDown,\n  Star,\n  Heart,\n  X,\n  Video,\n  MessageSquare,\n  Plus,\n  Loader2,\n  CheckCircle,\n  AlertCircle\n} from 'lucide-react';\nimport VideoPlayer from './VideoPlayer';\nimport toast from 'react-hot-toast';\n\nconst AIVideoStudio = () => {\n  const { videos, generateVideo, loading, fetchVideos, updateVideo } = useVideo();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [prompt, setPrompt] = useState('');\n  const [selectedModel, setSelectedModel] = useState('Runway Gen-4 Turbo');\n  const [showLovableBanner, setShowLovableBanner] = useState(true);\n  const [selectedVideo, setSelectedVideo] = useState(null);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    fetchVideos();\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatMessages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  // Function to detect if the prompt is asking to enhance/modify an existing video\n  const isEnhancementPrompt = (prompt) => {\n    const enhancementKeywords = [\n      'enhance', 'improve', 'modify', 'change', 'add', 'remove', 'make it', \n      'make the', 'update', 'edit', 'adjust', 'fix', 'better', 'more',\n      'less', 'brighter', 'darker', 'faster', 'slower', 'longer', 'shorter'\n    ];\n    \n    const lowerPrompt = prompt.toLowerCase();\n    return enhancementKeywords.some(keyword => lowerPrompt.includes(keyword));\n  };\n\n  // Function to get the most recent video from chat messages\n  const getLatestVideoFromChat = () => {\n    // Look for the most recent video in chat messages\n    for (let i = chatMessages.length - 1; i >= 0; i--) {\n      const message = chatMessages[i];\n      if (message.videoUrl && message.videoId) {\n        return {\n          videoId: message.videoId,\n          videoUrl: message.videoUrl,\n          prompt: message.originalPrompt || 'previous video'\n        };\n      }\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!prompt.trim() || loading) return;\n\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: prompt,\n      timestamp: new Date()\n    };\n\n    setChatMessages(prev => [...prev, userMessage]);\n    const currentPrompt = prompt;\n    setPrompt('');\n    setIsGenerating(true);\n\n    try {\n      // Check if this is an enhancement prompt and if we have a video to enhance\n      const isEnhancement = isEnhancementPrompt(currentPrompt);\n      const latestVideo = getLatestVideoFromChat();\n      \n      let result;\n      let aiMessage;\n\n      if (isEnhancement && latestVideo) {\n        // This is an enhancement request for an existing video\n        console.log('Enhancement detected, enhancing video:', latestVideo.videoId);\n        \n        result = await generateVideo(`${currentPrompt} based on this video: ${latestVideo.prompt}`, 5, '16:9', selectedModel);\n        \n        aiMessage = {\n          id: Date.now() + 1,\n          type: 'ai',\n          content: 'I\\'m enhancing your video...',\n          timestamp: new Date(),\n          videoId: result.videoId,\n          status: 'generating',\n          isEnhancement: true,\n          originalPrompt: currentPrompt\n        };\n      } else {\n        // This is a new video generation request\n        result = await generateVideo(currentPrompt, 5, '16:9', selectedModel);\n        \n        aiMessage = {\n          id: Date.now() + 1,\n          type: 'ai',\n          content: 'I\\'m generating your video...',\n          timestamp: new Date(),\n          videoId: result.videoId,\n          status: 'generating',\n          originalPrompt: currentPrompt\n        };\n      }\n\n      setChatMessages(prev => [...prev, aiMessage]);\n      \n      // Start polling for video completion\n      pollVideoStatus(result.videoId);\n      \n    } catch (error) {\n      console.error('Error generating video:', error);\n      toast.error('Failed to generate video');\n      \n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: 'Sorry, I couldn\\'t generate your video. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n\n      setChatMessages(prev => [...prev, errorMessage]);\n      setIsGenerating(false);\n    }\n  };\n\n  const pollVideoStatus = async (videoId) => {\n    const maxAttempts = 60; // 5 minutes max\n    let attempts = 0;\n\n    const poll = async () => {\n      try {\n        const response = await fetch(`/api/videos/${videoId}/status`);\n        const data = await response.json();\n        \n        if (data.status === 'completed' && data.videoUrl) {\n          // Update the AI message with the completed video\n          setChatMessages(prev => prev.map(msg => \n            msg.videoId === videoId \n              ? { ...msg, content: 'Here\\'s your generated video!', videoUrl: data.videoUrl, status: 'completed' }\n              : msg\n          ));\n          setIsGenerating(false);\n          toast.success('Video generated successfully!');\n          return;\n        } else if (data.status === 'failed') {\n          setChatMessages(prev => prev.map(msg => \n            msg.videoId === videoId \n              ? { ...msg, content: 'Sorry, video generation failed. Please try again.', status: 'failed', isError: true }\n              : msg\n          ));\n          setIsGenerating(false);\n          toast.error('Video generation failed');\n          return;\n        }\n\n        attempts++;\n        if (attempts < maxAttempts) {\n          setTimeout(poll, 5000); // Poll every 5 seconds\n        } else {\n          setChatMessages(prev => prev.map(msg => \n            msg.videoId === videoId \n              ? { ...msg, content: 'Video generation is taking longer than expected. Please check back later.', status: 'timeout' }\n              : msg\n          ));\n          setIsGenerating(false);\n        }\n      } catch (error) {\n        console.error('Error polling video status:', error);\n        setIsGenerating(false);\n      }\n    };\n\n    poll();\n  };\n\n  const handleVideoClick = (video) => {\n    setSelectedVideo(video);\n    \n    // Create chat context for this video\n    const initialMessages = [\n      {\n        id: 1,\n        type: 'ai',\n        content: `Here's your video: \"${video.title || 'Untitled Video'}\". You can ask me to enhance it, modify it, or create variations. What would you like to do?`,\n        timestamp: new Date(),\n        videoUrl: video.videoUrl,\n        videoId: video.videoId\n      }\n    ];\n    \n    setChatMessages(initialMessages);\n  };\n\n  const handleEnhanceVideo = async (enhancementPrompt) => {\n    if (!selectedVideo || !enhancementPrompt.trim()) return;\n\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: enhancementPrompt,\n      timestamp: new Date()\n    };\n\n    setChatMessages(prev => [...prev, userMessage]);\n    setIsGenerating(true);\n\n    try {\n      // For now, we'll create a new video with the enhancement prompt\n      // In a real implementation, you might want to use video-to-video generation\n      const result = await generateVideo(`${enhancementPrompt} based on this video: ${selectedVideo.prompt || 'previous video'}`, 5, '16:9', selectedModel);\n      \n      const aiMessage = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: 'I\\'m enhancing your video...',\n        timestamp: new Date(),\n        videoId: result.videoId,\n        status: 'generating'\n      };\n\n      setChatMessages(prev => [...prev, aiMessage]);\n      pollVideoStatus(result.videoId);\n      \n    } catch (error) {\n      console.error('Error enhancing video:', error);\n      toast.error('Failed to enhance video');\n      setIsGenerating(false);\n    }\n  };\n\n  const startNewChat = () => {\n    setSelectedVideo(null);\n    setChatMessages([\n      {\n        id: 1,\n        type: 'ai',\n        content: 'Welcome to AI Video Studio! I can help you create amazing videos. Just describe what you want to see and I\\'ll generate it for you. You can also edit and enhance your videos with simple prompts.',\n        timestamp: new Date()\n      }\n    ]);\n  };\n\n  const filteredVideos = videos.filter(video =>\n    (video.title && video.title.toLowerCase().includes(searchTerm.toLowerCase())) ||\n    (video.prompt && video.prompt.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  return (\n    <div className=\"h-screen bg-gradient-to-br from-purple-50/20 via-white to-white flex flex-col\">\n      {/* Header */}\n      <motion.header\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-4 flex items-center justify-between\"\n      >\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center\">\n            <Star className=\"h-6 w-6 text-white\" />\n          </div>\n          <h1 className=\"text-xl font-bold text-gray-900\">AI Video Studio</h1>\n        </div>\n\n        {/* Model Selector and Right side text */}\n        <div className=\"flex items-center space-x-4\">\n          {/* Model Selection */}\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-sm text-gray-600\">Model:</span>\n            <div className=\"relative\">\n              <select\n                value={selectedModel}\n                onChange={(e) => setSelectedModel(e.target.value)}\n                className=\"appearance-none bg-white border border-gray-200 rounded-lg px-3 py-1.5 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n              >\n                <option value=\"Runway Gen-4 Turbo\">Runway Gen-4 Turbo</option>\n                <option value=\"Runway Gen-3\">Runway Gen-3</option>\n                <option value=\"Veo3\">Veo3</option>\n              </select>\n              <ChevronDown className=\"absolute right-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400 pointer-events-none\" />\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-2 text-gray-600\">\n            <span className=\"text-sm\">Next-gen AI video creation</span>\n            <Sparkles className=\"h-4 w-4 text-primary-500\" />\n          </div>\n        </div>\n      </motion.header>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Left Sidebar - Video Library */}\n        <motion.div\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"w-80 bg-white/60 backdrop-blur-sm border-r border-gray-200 flex flex-col\"\n        >\n          {/* Sidebar Header */}\n          <div className=\"p-4 border-b border-gray-200\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Video Library</h2>\n              <button\n                onClick={startNewChat}\n                className=\"p-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors\"\n                title=\"Start New Chat\"\n              >\n                <Plus className=\"h-4 w-4\" />\n              </button>\n            </div>\n            \n            {/* Search */}\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search videos...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm\"\n              />\n            </div>\n          </div>\n\n          {/* Video List */}\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n            {filteredVideos.length === 0 ? (\n              <div className=\"text-center text-gray-500 py-8\">\n                <Video className=\"h-12 w-12 mx-auto mb-3 text-gray-300\" />\n                <p>No videos found</p>\n              </div>\n            ) : (\n              filteredVideos.map((video) => (\n                <motion.div\n                  key={video.videoId}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => handleVideoClick(video)}\n                  className={`p-3 rounded-lg border cursor-pointer transition-all ${\n                    selectedVideo?.videoId === video.videoId\n                      ? 'bg-primary-50 border-primary-200 shadow-sm'\n                      : 'bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm'\n                  }`}\n                >\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-12 h-8 bg-gray-100 rounded flex items-center justify-center flex-shrink-0\">\n                      {video.status === 'completed' ? (\n                        <Play className=\"h-4 w-4 text-gray-600\" />\n                      ) : video.status === 'generating' ? (\n                        <Loader2 className=\"h-4 w-4 text-primary-500 animate-spin\" />\n                      ) : (\n                        <AlertCircle className=\"h-4 w-4 text-red-500\" />\n                      )}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-sm font-medium text-gray-900 truncate\">\n                        {video.title || 'Untitled Video'}\n                      </h3>\n                      <p className=\"text-xs text-gray-500 mt-1 line-clamp-2\">\n                        {video.prompt || 'No prompt available'}\n                      </p>\n                      <div className=\"flex items-center space-x-2 mt-2\">\n                        <span className=\"text-xs text-gray-400\">\n                          {video.createdAt ? new Date(video.createdAt).toLocaleDateString() : 'Unknown date'}\n                        </span>\n                        {video.duration && (\n                          <span className=\"text-xs text-gray-400 flex items-center\">\n                            <Clock className=\"h-3 w-3 mr-1\" />\n                            {video.duration}s\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              ))\n            )}\n          </div>\n        </motion.div>\n\n        {/* Main Chat Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {/* Chat Messages */}\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n            {chatMessages.map((message) => (\n              <motion.div\n                key={message.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div className={`max-w-2xl ${message.type === 'user' ? 'order-2' : 'order-1'}`}>\n                  <div className={`flex items-start space-x-3 ${message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                    {/* Avatar */}\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${\n                      message.type === 'user' \n                        ? 'bg-primary-500' \n                        : 'bg-gradient-to-br from-primary-500 to-primary-600'\n                    }`}>\n                      {message.type === 'user' ? (\n                        <span className=\"text-white text-sm font-medium\">U</span>\n                      ) : (\n                        <Star className=\"h-4 w-4 text-white\" />\n                      )}\n                    </div>\n\n                    {/* Message Content */}\n                    <div className={`rounded-2xl px-4 py-3 ${\n                      message.type === 'user'\n                        ? 'bg-primary-500 text-white'\n                        : message.isError\n                        ? 'bg-red-50 text-red-800 border border-red-200'\n                        : 'bg-white border border-gray-200 shadow-sm'\n                    }`}>\n                      <p className=\"text-sm\">{message.content}</p>\n                      \n                      {/* Video Content */}\n                      {message.videoUrl && (\n                        <div className=\"mt-3\">\n                          <VideoPlayer videoUrl={message.videoUrl} />\n                        </div>\n                      )}\n                      \n                      {/* Loading State */}\n                      {message.status === 'generating' && (\n                        <div className=\"mt-3 flex items-center space-x-2 text-primary-600\">\n                          <Loader2 className=\"h-4 w-4 animate-spin\" />\n                          <span className=\"text-sm\">Generating video...</span>\n                        </div>\n                      )}\n                      \n                      {/* Timestamp */}\n                      <div className={`text-xs mt-2 ${\n                        message.type === 'user' ? 'text-primary-100' : 'text-gray-400'\n                      }`}>\n                        {message.timestamp.toLocaleTimeString()}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            ))}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input Area */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.5 }}\n            className=\"p-6 border-t border-gray-200 bg-white/80 backdrop-blur-sm\"\n          >\n            <div className=\"bg-white rounded-2xl p-4 shadow-lg border border-gray-200\">\n              <div className=\"flex items-center space-x-4\">\n                {/* Input Field */}\n                <div className=\"flex-1 relative\">\n                  <input\n                    type=\"text\"\n                    placeholder={selectedVideo ? \"Enhance this video...\" : \"Describe the video you want to create...\"}\n                    value={prompt}\n                    onChange={(e) => setPrompt(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && handleSubmit(e)}\n                    className=\"w-full px-4 py-3 pr-20 bg-secondary-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm\"\n                    disabled={isGenerating}\n                  />\n                  \n                  {/* Action Buttons */}\n                  <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1\">\n                    <button className=\"p-1.5 text-gray-400 hover:text-gray-600 transition-colors\">\n                      <Paperclip className=\"h-4 w-4\" />\n                    </button>\n                    <button\n                      onClick={handleSubmit}\n                      disabled={isGenerating || !prompt.trim()}\n                      className=\"p-1.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    >\n                      {isGenerating ? (\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      ) : (\n                        <Send className=\"h-4 w-4\" />\n                      )}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        </div>\n      </div>\n\n    </div>\n  );\n};\n\nexport default AIVideoStudio;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}