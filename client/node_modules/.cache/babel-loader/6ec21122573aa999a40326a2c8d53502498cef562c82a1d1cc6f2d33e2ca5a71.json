{"ast":null,"code":"import React,{useEffect,useMemo,useRef,useState}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import{Play,Pause,Scissors,Square,Music,Download,Save,ChevronLeft,History,Crop}from'lucide-react';import{useVideo}from'../context/VideoContext';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiBase=process.env.REACT_APP_API_BASE||'http://localhost:3004/api';export default function VideoEditor(){const{videoId}=useParams();const navigate=useNavigate();const{videos}=useVideo();const current=useMemo(()=>videos.find(v=>v.videoId===videoId),[videos,videoId]);const videoRef=useRef(null);const[isPlaying,setIsPlaying]=useState(false);const[duration,setDuration]=useState(0);const[trimStart,setTrimStart]=useState(0);const[trimEnd,setTrimEnd]=useState(0);const[cropRect,setCropRect]=useState(null);// { x, y, width, height }\nconst[musicUrl,setMusicUrl]=useState('');const[history,setHistory]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{if(!current)return;setTrimStart(0);setTrimEnd(current.duration||0);},[current]);useEffect(()=>{async function fetchHistory(){try{const res=await fetch(\"\".concat(apiBase,\"/videos/\").concat(videoId,\"/edits\"),{credentials:'include'});if(res.status===401){window.location.href='https://app.weam.ai/login';return;}const data=await res.json();setHistory(data.edits||[]);}catch(e){console.error(e);}}fetchHistory();},[videoId]);const togglePlay=()=>{const v=videoRef.current;if(!v)return;if(isPlaying){v.pause();setIsPlaying(false);}else{v.play();setIsPlaying(true);}};const onLoadedMetadata=()=>{const v=videoRef.current;if(!v)return;setDuration(v.duration);if(!trimEnd||trimEnd===0)setTrimEnd(Math.floor(v.duration));};const onTimeUpdate=()=>{const v=videoRef.current;if(!v)return;if(v.currentTime<trimStart)v.currentTime=trimStart;if(v.currentTime>trimEnd){v.pause();setIsPlaying(false);v.currentTime=trimStart;}};const onTimelineChange=val=>{const v=videoRef.current;if(!v)return;v.currentTime=Number(val);};const submitEdits=async function(){let downloadAfter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(trimStart>=trimEnd){toast.error('Invalid trim range');return;}setLoading(true);try{var _data$edit;const res=await fetch(\"\".concat(apiBase,\"/videos/\").concat(videoId,\"/process-edits\"),{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({trimStart:Math.floor(trimStart),trimEnd:Math.floor(trimEnd),outputFormat:'mp4',crop:cropRect,music:musicUrl||null})});if(res.status===401){window.location.href='https://app.weam.ai/login';return;}const data=await res.json();if(!res.ok)throw new Error(data.error||'Failed to process edits');toast.success('Edits saved');setHistory(h=>[data.edit,...h]);if(downloadAfter&&(_data$edit=data.edit)!==null&&_data$edit!==void 0&&_data$edit.outputUrl){window.open(data.edit.outputUrl,'_blank');}}catch(e){console.error(e);toast.error(e.message);}finally{setLoading(false);}};if(!current){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"inline-flex items-center text-sm text-gray-600 hover:text-gray-900\",children:[/*#__PURE__*/_jsx(ChevronLeft,{className:\"h-4 w-4 mr-1\"}),\" Back\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-gray-500\",children:\"Video not found.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between border-b px-4 py-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"px-3 py-1.5 rounded border\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[\"Editing: \",current.title||current.videoId]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>submitEdits(false),disabled:loading,className:\"px-3 py-1.5 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 inline-flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Save,{className:\"h-4 w-4\"}),\" Save\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>submitEdits(true),disabled:loading,className:\"px-3 py-1.5 border rounded inline-flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4\"}),\" Save & Download\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col items-center justify-start p-4 overflow-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-4xl bg-black rounded-lg overflow-hidden\",children:current.videoUrl?/*#__PURE__*/_jsx(\"video\",{ref:videoRef,src:current.videoUrl,className:\"w-full h-auto\",onLoadedMetadata:onLoadedMetadata,onTimeUpdate:onTimeUpdate,controls:false}):/*#__PURE__*/_jsx(\"div\",{className:\"text-white p-8\",children:\"Video processing...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex items-center gap-3 w-full max-w-4xl\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:togglePlay,className:\"px-3 py-1.5 border rounded inline-flex items-center gap-1\",children:[isPlaying?/*#__PURE__*/_jsx(Pause,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(Play,{className:\"h-4 w-4\"}),\" \",isPlaying?'Pause':'Play']}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:0,max:Math.floor(duration)||0,step:1,onChange:e=>onTimelineChange(e.target.value),className:\"w-full\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 w-28 text-right\",children:[Math.floor(duration),\"s\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-3 gap-4 w-full max-w-4xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-600\",children:\"Trim Start (s)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"w-full border rounded px-2 py-1\",value:trimStart,min:0,max:trimEnd,onChange:e=>setTrimStart(Number(e.target.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-600\",children:\"Trim End (s)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"w-full border rounded px-2 py-1\",value:trimEnd,min:trimStart,max:Math.floor(duration),onChange:e=>setTrimEnd(Number(e.target.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-600\",children:\"Music URL (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"w-full border rounded px-2 py-1\",value:musicUrl,onChange:e=>setMusicUrl(e.target.value),placeholder:\"https://.../music.mp3\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 border-l p-4 flex flex-col gap-4 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium mb-2\",children:\"Tools\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between border rounded p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Scissors,{className:\"h-4 w-4\"}),\" Trim\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between border rounded p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Crop,{className:\"h-4 w-4\"}),\" Crop\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCropRect({x:0,y:0,width:1,height:1}),className:\"text-sm underline\",children:\"Auto\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between border rounded p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Music,{className:\"h-4 w-4\"}),\" Music\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(History,{className:\"h-4 w-4\"}),\" History\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[history.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"No edits yet.\"}),history.map(h=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium\",children:h.type}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:new Date(h.createdAt).toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mt-1\",children:h.status}),h.outputUrl&&/*#__PURE__*/_jsx(\"a\",{href:h.outputUrl,target:\"_blank\",rel:\"noreferrer\",className:\"text-xs text-primary-600 underline\",children:\"Download\"})]},h.editId))]})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useParams","Link","useNavigate","Play","Pause","Scissors","Square","Music","Download","Save","ChevronLeft","History","Crop","useVideo","toast","jsx","_jsx","jsxs","_jsxs","apiBase","process","env","REACT_APP_API_BASE","VideoEditor","videoId","navigate","videos","current","find","v","videoRef","isPlaying","setIsPlaying","duration","setDuration","trimStart","setTrimStart","trimEnd","setTrimEnd","cropRect","setCropRect","musicUrl","setMusicUrl","history","setHistory","loading","setLoading","fetchHistory","res","fetch","concat","credentials","status","window","location","href","data","json","edits","e","console","error","togglePlay","pause","play","onLoadedMetadata","Math","floor","onTimeUpdate","currentTime","onTimelineChange","val","Number","submitEdits","downloadAfter","arguments","length","undefined","_data$edit","method","headers","body","JSON","stringify","outputFormat","crop","music","ok","Error","success","h","edit","outputUrl","open","message","className","children","to","title","onClick","disabled","videoUrl","ref","src","controls","type","min","max","step","onChange","target","value","placeholder","x","y","width","height","map","Date","createdAt","toLocaleString","rel","editId"],"sources":["/Users/kshitijvarma/Desktop/ai-doc-editor/AI-VideoGen/client/src/components/VideoEditor.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { Play, Pause, Scissors, Square, Music, Download, Save, ChevronLeft, History, Crop } from 'lucide-react';\nimport { useVideo } from '../context/VideoContext';\nimport toast from 'react-hot-toast';\n\nconst apiBase = process.env.REACT_APP_API_BASE || 'http://localhost:3004/api';\n\nexport default function VideoEditor() {\n  const { videoId } = useParams();\n  const navigate = useNavigate();\n  const { videos } = useVideo();\n  const current = useMemo(() => videos.find(v => v.videoId === videoId), [videos, videoId]);\n\n  const videoRef = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [trimStart, setTrimStart] = useState(0);\n  const [trimEnd, setTrimEnd] = useState(0);\n  const [cropRect, setCropRect] = useState(null); // { x, y, width, height }\n  const [musicUrl, setMusicUrl] = useState('');\n  const [history, setHistory] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!current) return;\n    setTrimStart(0);\n    setTrimEnd(current.duration || 0);\n  }, [current]);\n\n  useEffect(() => {\n    async function fetchHistory() {\n      try {\n        const res = await fetch(`${apiBase}/videos/${videoId}/edits`, {\n          credentials: 'include'\n        });\n        if (res.status === 401) {\n          window.location.href = 'https://app.weam.ai/login';\n          return;\n        }\n        const data = await res.json();\n        setHistory(data.edits || []);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    fetchHistory();\n  }, [videoId]);\n\n  const togglePlay = () => {\n    const v = videoRef.current;\n    if (!v) return;\n    if (isPlaying) {\n      v.pause();\n      setIsPlaying(false);\n    } else {\n      v.play();\n      setIsPlaying(true);\n    }\n  };\n\n  const onLoadedMetadata = () => {\n    const v = videoRef.current;\n    if (!v) return;\n    setDuration(v.duration);\n    if (!trimEnd || trimEnd === 0) setTrimEnd(Math.floor(v.duration));\n  };\n\n  const onTimeUpdate = () => {\n    const v = videoRef.current;\n    if (!v) return;\n    if (v.currentTime < trimStart) v.currentTime = trimStart;\n    if (v.currentTime > trimEnd) {\n      v.pause();\n      setIsPlaying(false);\n      v.currentTime = trimStart;\n    }\n  };\n\n  const onTimelineChange = (val) => {\n    const v = videoRef.current;\n    if (!v) return;\n    v.currentTime = Number(val);\n  };\n\n  const submitEdits = async (downloadAfter = false) => {\n    if (trimStart >= trimEnd) {\n      toast.error('Invalid trim range');\n      return;\n    }\n    setLoading(true);\n    try {\n      const res = await fetch(`${apiBase}/videos/${videoId}/process-edits`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          trimStart: Math.floor(trimStart),\n          trimEnd: Math.floor(trimEnd),\n          outputFormat: 'mp4',\n          crop: cropRect,\n          music: musicUrl || null,\n        })\n      });\n      if (res.status === 401) {\n        window.location.href = 'https://app.weam.ai/login';\n        return;\n      }\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Failed to process edits');\n      toast.success('Edits saved');\n      setHistory((h) => [data.edit, ...h]);\n      if (downloadAfter && data.edit?.outputUrl) {\n        window.open(data.edit.outputUrl, '_blank');\n      }\n    } catch (e) {\n      console.error(e);\n      toast.error(e.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!current) {\n    return (\n      <div className=\"p-6\">\n        <Link to=\"/\" className=\"inline-flex items-center text-sm text-gray-600 hover:text-gray-900\">\n          <ChevronLeft className=\"h-4 w-4 mr-1\" /> Back\n        </Link>\n        <div className=\"mt-6 text-gray-500\">Video not found.</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-white\">\n      <div className=\"flex items-center justify-between border-b px-4 py-3\">\n        <div className=\"flex items-center gap-3\">\n          <Link to=\"/\" className=\"px-3 py-1.5 rounded border\">← Back</Link>\n          <div className=\"font-medium\">Editing: {current.title || current.videoId}</div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button onClick={() => submitEdits(false)} disabled={loading} className=\"px-3 py-1.5 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 inline-flex items-center gap-1\">\n            <Save className=\"h-4 w-4\" /> Save\n          </button>\n          <button onClick={() => submitEdits(true)} disabled={loading} className=\"px-3 py-1.5 border rounded inline-flex items-center gap-1\">\n            <Download className=\"h-4 w-4\" /> Save & Download\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        {/* Center: Player and timeline */}\n        <div className=\"flex-1 flex flex-col items-center justify-start p-4 overflow-auto\">\n          <div className=\"w-full max-w-4xl bg-black rounded-lg overflow-hidden\">\n            {current.videoUrl ? (\n              <video\n                ref={videoRef}\n                src={current.videoUrl}\n                className=\"w-full h-auto\"\n                onLoadedMetadata={onLoadedMetadata}\n                onTimeUpdate={onTimeUpdate}\n                controls={false}\n              />\n            ) : (\n              <div className=\"text-white p-8\">Video processing...</div>\n            )}\n          </div>\n          <div className=\"mt-3 flex items-center gap-3 w-full max-w-4xl\">\n            <button onClick={togglePlay} className=\"px-3 py-1.5 border rounded inline-flex items-center gap-1\">\n              {isPlaying ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />} {isPlaying ? 'Pause' : 'Play'}\n            </button>\n            <div className=\"flex-1\">\n              <input\n                type=\"range\"\n                min={0}\n                max={Math.floor(duration) || 0}\n                step={1}\n                onChange={(e) => onTimelineChange(e.target.value)}\n                className=\"w-full\"\n              />\n            </div>\n            <div className=\"text-sm text-gray-600 w-28 text-right\">\n              {Math.floor(duration)}s\n            </div>\n          </div>\n\n          <div className=\"mt-4 grid grid-cols-3 gap-4 w-full max-w-4xl\">\n            <div className=\"col-span-1\">\n              <label className=\"text-sm text-gray-600\">Trim Start (s)</label>\n              <input type=\"number\" className=\"w-full border rounded px-2 py-1\" value={trimStart} min={0} max={trimEnd}\n                onChange={(e) => setTrimStart(Number(e.target.value))} />\n            </div>\n            <div className=\"col-span-1\">\n              <label className=\"text-sm text-gray-600\">Trim End (s)</label>\n              <input type=\"number\" className=\"w-full border rounded px-2 py-1\" value={trimEnd} min={trimStart} max={Math.floor(duration)}\n                onChange={(e) => setTrimEnd(Number(e.target.value))} />\n            </div>\n            <div className=\"col-span-1\">\n              <label className=\"text-sm text-gray-600\">Music URL (optional)</label>\n              <input type=\"text\" className=\"w-full border rounded px-2 py-1\" value={musicUrl}\n                onChange={(e) => setMusicUrl(e.target.value)} placeholder=\"https://.../music.mp3\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Right: Tools and History */}\n        <div className=\"w-80 border-l p-4 flex flex-col gap-4 overflow-y-auto\">\n          <div>\n            <div className=\"font-medium mb-2\">Tools</div>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between border rounded p-2\">\n                <div className=\"flex items-center gap-2\"><Scissors className=\"h-4 w-4\" /> Trim</div>\n              </div>\n              <div className=\"flex items-center justify-between border rounded p-2\">\n                <div className=\"flex items-center gap-2\"><Crop className=\"h-4 w-4\" /> Crop</div>\n                <button onClick={() => setCropRect({ x: 0, y: 0, width: 1, height: 1 })} className=\"text-sm underline\">Auto</button>\n              </div>\n              <div className=\"flex items-center justify-between border rounded p-2\">\n                <div className=\"flex items-center gap-2\"><Music className=\"h-4 w-4\" /> Music</div>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <div className=\"font-medium mb-2 flex items-center gap-2\"><History className=\"h-4 w-4\" /> History</div>\n            <div className=\"space-y-2\">\n              {history.length === 0 && (\n                <div className=\"text-sm text-gray-500\">No edits yet.</div>\n              )}\n              {history.map((h) => (\n                <div key={h.editId} className=\"border rounded p-2\">\n                  <div className=\"text-sm font-medium\">{h.type}</div>\n                  <div className=\"text-xs text-gray-500\">{new Date(h.createdAt).toLocaleString()}</div>\n                  <div className=\"text-xs mt-1\">{h.status}</div>\n                  {h.outputUrl && (\n                    <a href={h.outputUrl} target=\"_blank\" rel=\"noreferrer\" className=\"text-xs text-primary-600 underline\">Download</a>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,OAAO,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACnE,OAASC,SAAS,CAAEC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CAC/D,OAASC,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,WAAW,CAAEC,OAAO,CAAEC,IAAI,KAAQ,cAAc,CAC/G,OAASC,QAAQ,KAAQ,yBAAyB,CAClD,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAI,2BAA2B,CAE7E,cAAe,SAAS,CAAAC,WAAWA,CAAA,CAAG,CACpC,KAAM,CAAEC,OAAQ,CAAC,CAAGxB,SAAS,CAAC,CAAC,CAC/B,KAAM,CAAAyB,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEwB,MAAO,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAC7B,KAAM,CAAAc,OAAO,CAAG9B,OAAO,CAAC,IAAM6B,MAAM,CAACE,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACL,OAAO,GAAKA,OAAO,CAAC,CAAE,CAACE,MAAM,CAAEF,OAAO,CAAC,CAAC,CAEzF,KAAM,CAAAM,QAAQ,CAAGhC,MAAM,CAAC,IAAI,CAAC,CAC7B,KAAM,CAACiC,SAAS,CAAEC,YAAY,CAAC,CAAGjC,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACkC,QAAQ,CAAEC,WAAW,CAAC,CAAGnC,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAACoC,SAAS,CAAEC,YAAY,CAAC,CAAGrC,QAAQ,CAAC,CAAC,CAAC,CAC7C,KAAM,CAACsC,OAAO,CAAEC,UAAU,CAAC,CAAGvC,QAAQ,CAAC,CAAC,CAAC,CACzC,KAAM,CAACwC,QAAQ,CAAEC,WAAW,CAAC,CAAGzC,QAAQ,CAAC,IAAI,CAAC,CAAE;AAChD,KAAM,CAAC0C,QAAQ,CAAEC,WAAW,CAAC,CAAG3C,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAC4C,OAAO,CAAEC,UAAU,CAAC,CAAG7C,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC8C,OAAO,CAAEC,UAAU,CAAC,CAAG/C,QAAQ,CAAC,KAAK,CAAC,CAE7CH,SAAS,CAAC,IAAM,CACd,GAAI,CAAC+B,OAAO,CAAE,OACdS,YAAY,CAAC,CAAC,CAAC,CACfE,UAAU,CAACX,OAAO,CAACM,QAAQ,EAAI,CAAC,CAAC,CACnC,CAAC,CAAE,CAACN,OAAO,CAAC,CAAC,CAEb/B,SAAS,CAAC,IAAM,CACd,cAAe,CAAAmD,YAAYA,CAAA,CAAG,CAC5B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAI/B,OAAO,aAAA+B,MAAA,CAAW1B,OAAO,WAAU,CAC5D2B,WAAW,CAAE,SACf,CAAC,CAAC,CACF,GAAIH,GAAG,CAACI,MAAM,GAAK,GAAG,CAAE,CACtBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,2BAA2B,CAClD,OACF,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,GAAG,CAACS,IAAI,CAAC,CAAC,CAC7Bb,UAAU,CAACY,IAAI,CAACE,KAAK,EAAI,EAAE,CAAC,CAC9B,CAAE,MAAOC,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC,CAClB,CACF,CACAZ,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACvB,OAAO,CAAC,CAAC,CAEb,KAAM,CAAAsC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAjC,CAAC,CAAGC,QAAQ,CAACH,OAAO,CAC1B,GAAI,CAACE,CAAC,CAAE,OACR,GAAIE,SAAS,CAAE,CACbF,CAAC,CAACkC,KAAK,CAAC,CAAC,CACT/B,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,IAAM,CACLH,CAAC,CAACmC,IAAI,CAAC,CAAC,CACRhC,YAAY,CAAC,IAAI,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAiC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAApC,CAAC,CAAGC,QAAQ,CAACH,OAAO,CAC1B,GAAI,CAACE,CAAC,CAAE,OACRK,WAAW,CAACL,CAAC,CAACI,QAAQ,CAAC,CACvB,GAAI,CAACI,OAAO,EAAIA,OAAO,GAAK,CAAC,CAAEC,UAAU,CAAC4B,IAAI,CAACC,KAAK,CAACtC,CAAC,CAACI,QAAQ,CAAC,CAAC,CACnE,CAAC,CAED,KAAM,CAAAmC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAvC,CAAC,CAAGC,QAAQ,CAACH,OAAO,CAC1B,GAAI,CAACE,CAAC,CAAE,OACR,GAAIA,CAAC,CAACwC,WAAW,CAAGlC,SAAS,CAAEN,CAAC,CAACwC,WAAW,CAAGlC,SAAS,CACxD,GAAIN,CAAC,CAACwC,WAAW,CAAGhC,OAAO,CAAE,CAC3BR,CAAC,CAACkC,KAAK,CAAC,CAAC,CACT/B,YAAY,CAAC,KAAK,CAAC,CACnBH,CAAC,CAACwC,WAAW,CAAGlC,SAAS,CAC3B,CACF,CAAC,CAED,KAAM,CAAAmC,gBAAgB,CAAIC,GAAG,EAAK,CAChC,KAAM,CAAA1C,CAAC,CAAGC,QAAQ,CAACH,OAAO,CAC1B,GAAI,CAACE,CAAC,CAAE,OACRA,CAAC,CAACwC,WAAW,CAAGG,MAAM,CAACD,GAAG,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAE,WAAW,CAAG,cAAAA,CAAA,CAAiC,IAA1B,CAAAC,aAAa,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CAC9C,GAAIxC,SAAS,EAAIE,OAAO,CAAE,CACxBvB,KAAK,CAAC+C,KAAK,CAAC,oBAAoB,CAAC,CACjC,OACF,CACAf,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,KAAAgC,UAAA,CACF,KAAM,CAAA9B,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAI/B,OAAO,aAAA+B,MAAA,CAAW1B,OAAO,mBAAkB,CACpEuD,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/C7B,WAAW,CAAE,SAAS,CACtB8B,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBhD,SAAS,CAAE+B,IAAI,CAACC,KAAK,CAAChC,SAAS,CAAC,CAChCE,OAAO,CAAE6B,IAAI,CAACC,KAAK,CAAC9B,OAAO,CAAC,CAC5B+C,YAAY,CAAE,KAAK,CACnBC,IAAI,CAAE9C,QAAQ,CACd+C,KAAK,CAAE7C,QAAQ,EAAI,IACrB,CAAC,CACH,CAAC,CAAC,CACF,GAAIO,GAAG,CAACI,MAAM,GAAK,GAAG,CAAE,CACtBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,2BAA2B,CAClD,OACF,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,GAAG,CAACS,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACT,GAAG,CAACuC,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAChC,IAAI,CAACK,KAAK,EAAI,yBAAyB,CAAC,CACrE/C,KAAK,CAAC2E,OAAO,CAAC,aAAa,CAAC,CAC5B7C,UAAU,CAAE8C,CAAC,EAAK,CAAClC,IAAI,CAACmC,IAAI,CAAE,GAAGD,CAAC,CAAC,CAAC,CACpC,GAAIhB,aAAa,GAAAI,UAAA,CAAItB,IAAI,CAACmC,IAAI,UAAAb,UAAA,WAATA,UAAA,CAAWc,SAAS,CAAE,CACzCvC,MAAM,CAACwC,IAAI,CAACrC,IAAI,CAACmC,IAAI,CAACC,SAAS,CAAE,QAAQ,CAAC,CAC5C,CACF,CAAE,MAAOjC,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC,CAChB7C,KAAK,CAAC+C,KAAK,CAACF,CAAC,CAACmC,OAAO,CAAC,CACxB,CAAC,OAAS,CACRhD,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAI,CAACnB,OAAO,CAAE,CACZ,mBACET,KAAA,QAAK6E,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB9E,KAAA,CAACjB,IAAI,EAACgG,EAAE,CAAC,GAAG,CAACF,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACzFhF,IAAA,CAACN,WAAW,EAACqF,SAAS,CAAC,cAAc,CAAE,CAAC,QAC1C,EAAM,CAAC,cACP/E,IAAA,QAAK+E,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,kBAAgB,CAAK,CAAC,EACvD,CAAC,CAEV,CAEA,mBACE9E,KAAA,QAAK6E,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9C9E,KAAA,QAAK6E,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnE9E,KAAA,QAAK6E,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtChF,IAAA,CAACf,IAAI,EAACgG,EAAE,CAAC,GAAG,CAACF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,aAAM,CAAM,CAAC,cACjE9E,KAAA,QAAK6E,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAC,WAAS,CAACrE,OAAO,CAACuE,KAAK,EAAIvE,OAAO,CAACH,OAAO,EAAM,CAAC,EAC3E,CAAC,cACNN,KAAA,QAAK6E,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC9E,KAAA,WAAQiF,OAAO,CAAEA,CAAA,GAAM1B,WAAW,CAAC,KAAK,CAAE,CAAC2B,QAAQ,CAAEvD,OAAQ,CAACkD,SAAS,CAAC,uHAAuH,CAAAC,QAAA,eAC7LhF,IAAA,CAACP,IAAI,EAACsF,SAAS,CAAC,SAAS,CAAE,CAAC,QAC9B,EAAQ,CAAC,cACT7E,KAAA,WAAQiF,OAAO,CAAEA,CAAA,GAAM1B,WAAW,CAAC,IAAI,CAAE,CAAC2B,QAAQ,CAAEvD,OAAQ,CAACkD,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eAChIhF,IAAA,CAACR,QAAQ,EAACuF,SAAS,CAAC,SAAS,CAAE,CAAC,mBAClC,EAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAEN7E,KAAA,QAAK6E,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAE1C9E,KAAA,QAAK6E,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChFhF,IAAA,QAAK+E,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAClErE,OAAO,CAAC0E,QAAQ,cACfrF,IAAA,UACEsF,GAAG,CAAExE,QAAS,CACdyE,GAAG,CAAE5E,OAAO,CAAC0E,QAAS,CACtBN,SAAS,CAAC,eAAe,CACzB9B,gBAAgB,CAAEA,gBAAiB,CACnCG,YAAY,CAAEA,YAAa,CAC3BoC,QAAQ,CAAE,KAAM,CACjB,CAAC,cAEFxF,IAAA,QAAK+E,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,qBAAmB,CAAK,CACzD,CACE,CAAC,cACN9E,KAAA,QAAK6E,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5D9E,KAAA,WAAQiF,OAAO,CAAErC,UAAW,CAACiC,SAAS,CAAC,2DAA2D,CAAAC,QAAA,EAC/FjE,SAAS,cAAGf,IAAA,CAACZ,KAAK,EAAC2F,SAAS,CAAC,SAAS,CAAE,CAAC,cAAG/E,IAAA,CAACb,IAAI,EAAC4F,SAAS,CAAC,SAAS,CAAE,CAAC,CAAC,GAAC,CAAChE,SAAS,CAAG,OAAO,CAAG,MAAM,EAClG,CAAC,cACTf,IAAA,QAAK+E,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrBhF,IAAA,UACEyF,IAAI,CAAC,OAAO,CACZC,GAAG,CAAE,CAAE,CACPC,GAAG,CAAEzC,IAAI,CAACC,KAAK,CAAClC,QAAQ,CAAC,EAAI,CAAE,CAC/B2E,IAAI,CAAE,CAAE,CACRC,QAAQ,CAAGlD,CAAC,EAAKW,gBAAgB,CAACX,CAAC,CAACmD,MAAM,CAACC,KAAK,CAAE,CAClDhB,SAAS,CAAC,QAAQ,CACnB,CAAC,CACC,CAAC,cACN7E,KAAA,QAAK6E,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EACnD9B,IAAI,CAACC,KAAK,CAAClC,QAAQ,CAAC,CAAC,GACxB,EAAK,CAAC,EACH,CAAC,cAENf,KAAA,QAAK6E,SAAS,CAAC,8CAA8C,CAAAC,QAAA,eAC3D9E,KAAA,QAAK6E,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhF,IAAA,UAAO+E,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cAC/DhF,IAAA,UAAOyF,IAAI,CAAC,QAAQ,CAACV,SAAS,CAAC,iCAAiC,CAACgB,KAAK,CAAE5E,SAAU,CAACuE,GAAG,CAAE,CAAE,CAACC,GAAG,CAAEtE,OAAQ,CACtGwE,QAAQ,CAAGlD,CAAC,EAAKvB,YAAY,CAACoC,MAAM,CAACb,CAAC,CAACmD,MAAM,CAACC,KAAK,CAAC,CAAE,CAAE,CAAC,EACxD,CAAC,cACN7F,KAAA,QAAK6E,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhF,IAAA,UAAO+E,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cAC7DhF,IAAA,UAAOyF,IAAI,CAAC,QAAQ,CAACV,SAAS,CAAC,iCAAiC,CAACgB,KAAK,CAAE1E,OAAQ,CAACqE,GAAG,CAAEvE,SAAU,CAACwE,GAAG,CAAEzC,IAAI,CAACC,KAAK,CAAClC,QAAQ,CAAE,CACzH4E,QAAQ,CAAGlD,CAAC,EAAKrB,UAAU,CAACkC,MAAM,CAACb,CAAC,CAACmD,MAAM,CAACC,KAAK,CAAC,CAAE,CAAE,CAAC,EACtD,CAAC,cACN7F,KAAA,QAAK6E,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhF,IAAA,UAAO+E,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,sBAAoB,CAAO,CAAC,cACrEhF,IAAA,UAAOyF,IAAI,CAAC,MAAM,CAACV,SAAS,CAAC,iCAAiC,CAACgB,KAAK,CAAEtE,QAAS,CAC7EoE,QAAQ,CAAGlD,CAAC,EAAKjB,WAAW,CAACiB,CAAC,CAACmD,MAAM,CAACC,KAAK,CAAE,CAACC,WAAW,CAAC,uBAAuB,CAAE,CAAC,EACnF,CAAC,EACH,CAAC,EACH,CAAC,cAGN9F,KAAA,QAAK6E,SAAS,CAAC,uDAAuD,CAAAC,QAAA,eACpE9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,QAAK+E,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,OAAK,CAAK,CAAC,cAC7C9E,KAAA,QAAK6E,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBhF,IAAA,QAAK+E,SAAS,CAAC,sDAAsD,CAAAC,QAAA,cACnE9E,KAAA,QAAK6E,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eAAChF,IAAA,CAACX,QAAQ,EAAC0F,SAAS,CAAC,SAAS,CAAE,CAAC,QAAK,EAAK,CAAC,CACjF,CAAC,cACN7E,KAAA,QAAK6E,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnE9E,KAAA,QAAK6E,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eAAChF,IAAA,CAACJ,IAAI,EAACmF,SAAS,CAAC,SAAS,CAAE,CAAC,QAAK,EAAK,CAAC,cAChF/E,IAAA,WAAQmF,OAAO,CAAEA,CAAA,GAAM3D,WAAW,CAAC,CAAEyE,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,CAAEC,KAAK,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAE,CAAC,CAAE,CAACrB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,MAAI,CAAQ,CAAC,EACjH,CAAC,cACNhF,IAAA,QAAK+E,SAAS,CAAC,sDAAsD,CAAAC,QAAA,cACnE9E,KAAA,QAAK6E,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eAAChF,IAAA,CAACT,KAAK,EAACwF,SAAS,CAAC,SAAS,CAAE,CAAC,SAAM,EAAK,CAAC,CAC/E,CAAC,EACH,CAAC,EACH,CAAC,cAEN7E,KAAA,QAAA8E,QAAA,eACE9E,KAAA,QAAK6E,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eAAChF,IAAA,CAACL,OAAO,EAACoF,SAAS,CAAC,SAAS,CAAE,CAAC,WAAQ,EAAK,CAAC,cACvG7E,KAAA,QAAK6E,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBrD,OAAO,CAACiC,MAAM,GAAK,CAAC,eACnB5D,IAAA,QAAK+E,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,eAAa,CAAK,CAC1D,CACArD,OAAO,CAAC0E,GAAG,CAAE3B,CAAC,eACbxE,KAAA,QAAoB6E,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAChDhF,IAAA,QAAK+E,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAEN,CAAC,CAACe,IAAI,CAAM,CAAC,cACnDzF,IAAA,QAAK+E,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAE,GAAI,CAAAsB,IAAI,CAAC5B,CAAC,CAAC6B,SAAS,CAAC,CAACC,cAAc,CAAC,CAAC,CAAM,CAAC,cACrFxG,IAAA,QAAK+E,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEN,CAAC,CAACtC,MAAM,CAAM,CAAC,CAC7CsC,CAAC,CAACE,SAAS,eACV5E,IAAA,MAAGuC,IAAI,CAAEmC,CAAC,CAACE,SAAU,CAACkB,MAAM,CAAC,QAAQ,CAACW,GAAG,CAAC,YAAY,CAAC1B,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAC,UAAQ,CAAG,CAClH,GANON,CAAC,CAACgC,MAOP,CACN,CAAC,EACC,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}